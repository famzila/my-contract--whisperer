<app-tab-header 
  [title]="'analysis.risks.title' | translate"
  [subtitle]="'analysis.risks.subtitle' | translate"
  [icon]="AlertTriangleIcon"
  iconBgClass="bg-red-100 dark:bg-red-900"
  iconColorClass="text-red-600 dark:text-red-400">
</app-tab-header>
@if (isLoading()) {
    @if (isRetrying()) {
      <app-notice 
        type="loading"
        [title]="('analysis.retrying' | translate) + ' (' + ('analysis.attempt' | translate) + ' ' + retryCount() + '/3' + ')'"
        [message]="('analysis.retryMessage' | translate)"
      ></app-notice>
    }
    <app-skeleton-loader 
      type="list" 
      [items]="3" 
      listItemPadding="p-4" 
      [loadingText]="'analysis.loading.risks' | translate">
    </app-skeleton-loader>
} @else {
    
    @if (risks() && risks().length > 0) {
      <!-- High Risks -->
      @if (highRisks().length > 0) {
        <div class="space-y-2">
          @for (risk of highRisks(); track $index) {
            <app-contract-insight-card
              [title]="risk.title"
              [description]="risk.description"
              [severity]="'high'"
              [impactLabel]="'analysis.risks.impact' | translate"
              [impactText]="risk.impact"
              [expanded]="false"
            />
          }
        </div>
      }
      
      <!-- Medium Risks -->
      @if (mediumRisks().length > 0) {
        <div class="space-y-2">
          @for (risk of mediumRisks(); track $index) {
            <app-contract-insight-card
              [title]="risk.title"
              [description]="risk.description"
              [severity]="'medium'"
              [impactLabel]="'analysis.risks.impact' | translate"
              [impactText]="risk.impact"
              [expanded]="false"
            />
          }
        </div>
      }
      
      <!-- Low Risks -->
      @if (lowRisks().length > 0) {
        <div class="space-y-2">
          @for (risk of lowRisks(); track $index) {
            <app-contract-insight-card
              [title]="risk.title"
              [description]="risk.description"
              [severity]="'low'"
              [impactLabel]="'analysis.risks.impact' | translate"
              [impactText]="risk.impact"
              [expanded]="false"
            />
          }
        </div>
      }
    } @else {
      <div class="text-empty-state">
        <lucide-icon [name]="FileXIcon" class="w-16 h-16 mx-auto mb-4 text-gray-400 dark:text-gray-500"></lucide-icon>
        <p>{{ 'analysis.risks.noRisks' | translate }}</p>
      </div>
    }
}
