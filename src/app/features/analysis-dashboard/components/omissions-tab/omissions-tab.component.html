<app-tab-header
  [title]="'analysis.omissions.title' | translate"
  [subtitle]="'analysis.omissions.subtitle' | translate"
  [icon]="FileXIcon"
  iconBgClass="bg-amber-100"
  iconColorClass="text-amber-600"
>
</app-tab-header>
@if (isLoading()) { @if (isRetrying()) {
  <app-alert 
  type="loading"
  [title]="('analysis.retrying' | translate) + ' (' + ('analysis.attempt' | translate) + ' ' + retryCount() + '/3' + ')'"
  [message]="('analysis.retryMessage' | translate)"
></app-alert>
}
<app-skeleton-loader
  type="list"
  [items]="3"
  listItemPadding="p-4"
  loadingText="Loading omissions..."
>
</app-skeleton-loader>
} @else { @if (omissions() && omissions().length > 0) {
<!-- High Priority Omissions -->
@if (highPriorityOmissions().length > 0) {
<div class="space-y-4">
  @for (omission of highPriorityOmissions(); track $index) {
  <app-alert type="error" [showIcon]="false" [title]="omission.item" [message]="omission.impact">
    <div class="pt-1">
      <div class="bg-white/80 backdrop-blur-sm rounded-lg p-4 border border-red-200/50 shadow-sm">
        <p class="text-sm font-medium text-red-700 flex items-center gap-2 mb-2">
          <lucide-icon [name]="AlertTriangleIcon" class="w-4 h-4"></lucide-icon>
          {{ 'analysis.omissions.whyMatters' | translate }}
        </p>
        <p class="text-sm text-gray-700 leading-relaxed">{{ omission.impact }}</p>
      </div>
    </div>
  </app-alert>
  }
</div>
}

<!-- Medium Priority Omissions -->
@if (mediumPriorityOmissions().length > 0) {
<div class="space-y-4">
  @for (omission of mediumPriorityOmissions(); track $index) {
  <app-alert type="warning" [showIcon]="false" [title]="omission.item" [message]="omission.impact">
    <div class="pt-1">
      <div
        class="bg-white/80 backdrop-blur-sm rounded-lg p-4 border border-yellow-200/50 shadow-sm"
      >
        <p class="text-sm font-medium text-yellow-700 flex items-center gap-2 mb-2">
          <lucide-icon [name]="LightbulbIcon" class="w-4 h-4"></lucide-icon>
          {{ 'analysis.omissions.whyMatters' | translate }}
        </p>
        <p class="text-sm text-gray-700 leading-relaxed">{{ omission.impact }}</p>
      </div>
    </div>
  </app-alert>
  }
</div>
}

<!-- Low Priority Omissions -->
@if (lowPriorityOmissions().length > 0) {
<div class="space-y-4">
  @for (omission of lowPriorityOmissions(); track $index) {
  <app-alert type="info" [showIcon]="false" [title]="omission.item" [message]="omission.impact">
  </app-alert>
  }
</div>
} } @else {
<div class="p-8 text-center text-gray-500">
  <lucide-icon [name]="FileXIcon" class="w-16 h-16 mx-auto mb-4 text-gray-400"></lucide-icon>
  <p>{{ 'analysis.omissions.noOmissions' | translate }}</p>
</div>
} }
